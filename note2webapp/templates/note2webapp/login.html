{% extends "auth_base.html" %}
{% block title %}{% if request.path == '/signup/' %}Sign Up{% else %}Login{% endif %} | Note2Web{% endblock %}

{% block content %}
  <!-- Logo -->
  <div class="auth-logo">
    <h1>üîê Note2Web</h1>
    <p>
      {% if request.path == '/signup/' %}
        Create your account to get started
      {% else %}
        Welcome back! Please login to continue
      {% endif %}
    </p>
  </div>

  <!-- Tabs -->
  <div class="auth-tabs">
    <a href="{% url 'login' %}" class="auth-tab {% if request.path == '/login/' %}active{% endif %}">Login</a>
    <a href="{% url 'signup' %}" class="auth-tab {% if request.path == '/signup/' %}active{% endif %}">Sign Up</a>
  </div>

  <!-- Form -->
  <form method="post">
    {% csrf_token %}
    
    <div class="mb-3">
      <label class="auth-form-label">Username</label>
      <input 
        type="text" 
        name="username" 
        class="auth-form-control" 
        placeholder="{% if request.path == '/signup/' %}Choose a username{% else %}Enter your username{% endif %}" 
        required
        autocomplete="username"
      >
    </div>

    <div class="mb-3">
      <label class="auth-form-label">Password</label>
      <input 
        type="password" 
        name="{% if request.path == '/signup/' %}password1{% else %}password{% endif %}" 
        class="auth-form-control" 
        placeholder="{% if request.path == '/signup/' %}Create a password{% else %}Enter your password{% endif %}" 
        required
        autocomplete="{% if request.path == '/signup/' %}new-password{% else %}current-password{% endif %}"
      >
    </div>

    {% if request.path == '/signup/' %}
      <div class="mb-3">
        <label class="auth-form-label">Confirm Password</label>
        <input 
          type="password" 
          name="password2" 
          class="auth-form-control" 
          placeholder="Confirm your password" 
          required
          autocomplete="new-password"
        >
      </div>
    {% endif %}

    <button type="submit" class="auth-submit-btn">
      {% if request.path == '/signup/' %}
        <i class="fas fa-user-plus"></i> Create Account
      {% else %}
        <i class="fas fa-sign-in-alt"></i> Login
      {% endif %}
    </button>
  </form>

  <!-- Form errors (e.g., invalid credentials, password mismatch) -->
  {% if form.errors %}
    <div class="alert alert-danger">
      <i class="fas fa-exclamation-circle"></i>
      {% if request.path == '/signup/' %}
        Please correct the errors below.
      {% else %}
        Invalid username or password. Please try again.
      {% endif %}
    </div>
  {% endif %}

  <!-- Django messages framework -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %}">
        <i class="fas fa-{% if message.tags == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <!-- Footer -->
  <div class="auth-footer">
    <p>
      {% if request.path == '/signup/' %}
        Already have an account? <a href="{% url 'login' %}">Login here</a>
      {% else %}
        Don't have an account? <a href="{% url 'signup' %}">Sign up now</a>
      {% endif %}
    </p>
  </div>
{% endblock %}